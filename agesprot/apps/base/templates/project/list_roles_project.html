{% extends 'layout/base.html' %}

{% load staticfiles %}

{% block content_head %}
	<link rel="stylesheet" href="{% static 'css/bootstrap.datetimepicker.min.css' %}">
	<link rel="stylesheet" href="{% static 'css/datatables.min.css' %}">
	<script src="{% static 'js/moment.min.js' %}"></script>
	<script src="{% static 'js/bootstrap.datetimepicker.min.js' %}"></script>
	<script src="{% static 'js/datatables.min.js' %}"></script>
{% endblock content_head %}

{% block content %}
	<div id="wrapper">
		{% include 'elements/menu_top.html' %}
		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">{{ title }} <a href="{% url 'form_role' %}" class="btn btn-success open-modal" data-toggle="modal" data-target="#Modal">Nuevo role</a></h1>
				</div>
			</div>
			<div class="row">
				<table class="table table-striped table-bordered table-responsive table-hover">
					<thead>
						<tr>
							<th>Nombre del role</th>
							<th>Acci√≥n</th>
						</tr>
					</thead>
					<tbody>
						{% for role in object_list %}
							<tr id="{{ role.pk }}">
								<td>{{ role.nombre_role }}</td>
								<td>
									<a href="{% url 'form_role' role.pk %}" class="btn btn-primary open-modal" data-toggle="modal" data-target="#Modal">Editar</a>
									<a href="{% url 'delete_role' role.pk %}" class="btn btn-danger delete" id="{{ role.pk }}">Eliminar</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
				<nav>
					<ul class="pager">
						{% if page_obj.has_previous %}
							<li>
								<a href="?page={{ page_obj.previous_page_number }}" class="previous">
									<span aria-hidden="true">&larr;</span> Anterior
								</a>
							</li>
						{% endif %}
						{% if page_obj.has_next %}
							<li>
								<a href="?page={{ page_obj.next_page_number }}" class="next">
									<span aria-hidden="true">&rarr;</span> Siguiente
								</a>
							</li>
						{% endif %}
					</ul>
				</nav>
			</div>
		</div>
	</div>
{% endblock content %}

{% block content_script %}
	$(document).on("click", ".delete", function(){
		var id = $(this).attr('id');
		$.get($(this).attr('href'), function(data){
			show_message(data.type, data.msg);
			if(data.type == 'success'){
				$('#'+id).remove();
			}
		});
		return false;
	});
{% endblock content_script %}